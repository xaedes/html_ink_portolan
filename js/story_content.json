{"inkVersion":20,"root":[["\n","\n","\n","\n",{"->":"Prolog"},["done",{"#n":"g-0"}],null],"done",{"Prolog":[["^It is the Age of Discovery.","\n","^Since a very young age you wanted to make maps.","\n","^Beautiful drawings of the world.","\n","^Finding places, connecting ports, navigating the dangers of the unknown.","\n","^All those souls that where lost on Sea.","\n","^Maybe they could have avoided their fate, if only they knew...","\n","ev","str","^Continue","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","\n",{"->":"MainMenu"},null]}],null],"MainMenu":[["^<h1>Portolan</h1>","\n","ev","str","^Start Game","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^End","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":"GameLoop"},"\n",{"->":".^.^.g-0"},null],"c-1":["^ ",{"->":"EndScreen"},"\n",{"->":".^.^.g-0"},null],"g-0":[{"->":"EndScreen"},null]}],null],"EndScreen":["^This is the end.","\n","end",null],"GameLoop":[["ev","str","^Visit Island","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Exit Game","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ","ev",{"^->":"Island"},{"^->":"GameLoop"},"/ev",{"->":"Journey"},"\n",{"->":".^.^.g-0"},null],"c-1":["^ ",{"->":"MainMenu"},"\n",{"->":".^.^.g-0"},null],"g-0":[{"->":"MainMenu"},null]}],{"#f":3}],"Journey":[{"temp=":"goback"},{"temp=":"destination"},"^On your way to the destination nothing particularly interesting happened.","\n","ev",{"VAR?":"goback"},"/ev",{"->":"destination","var":true},null],"Island":[{"temp=":"goback"},"^After landing you explore the island and finally look for other visible islands in the surrounding ocean.","\n","ev",{"VAR?":"goback"},0,"/ev",{"->":".^.list_observations"},{"list_observations":[{"temp=":"idx"},{"temp=":"goback"},"ev",{"VAR?":"arr_current_observations"},{"x()":"Array_isInvalid","exArgs":1},"/ev",{"temp=":"invalid"},"\n","ev",{"VAR?":"invalid"},"/ev",[{"->":".^.b","c":true},{"b":["ev",{"VAR?":"goback"},"/ev",{"->":"Island.done"},{"->":".^.^.^.12"},null]}],"nop","\n","ev",{"VAR?":"arr_current_observations"},{"x()":"Array_size","exArgs":1},"/ev",{"temp=":"size"},"\n","ev",{"VAR?":"idx"},{"VAR?":"size"},">=","/ev",[{"->":".^.b","c":true},{"b":["ev",{"VAR?":"goback"},"/ev",{"->":"Island.done"},{"->":".^.^.^.26"},null]}],"nop","\n","ev",{"VAR?":"arr_current_observations"},{"VAR?":"idx"},{"x()":"Array_get","exArgs":2},"/ev",{"temp=":"bearing"},"\n","^You see another ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^island",{"->":".^.^.17"},null],"s1":["pop","^isle",{"->":".^.^.17"},null],"#f":5}],"^ at ","ev",{"VAR?":"bearing"},{"f()":"print_num"},"out","/ev","^ degree.","\n","ev",{"VAR?":"goback"},{"VAR?":"idx"},1,"+","/ev",{"->":".^"},null],"done":[{"temp=":"goback"},{"->":"goback","var":true},null],"#f":3}],"print_int":[{"temp=":"x"},["ev",{"VAR?":"x"},1000,">=","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"x"},1000,"/",{"f()":".^.^.^"},"out","/ev","^ thousand ","ev",{"VAR?":"x"},1000,"%",0,">","/ev",[{"->":".^.b","c":true},{"b":["ev",{"VAR?":"x"},1000,"%",{"f()":"print_int"},"out","/ev",{"->":".^.^.^.17"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"x"},100,">=","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"x"},100,"/",{"f()":".^.^.^"},"out","/ev","^ hundred ","ev",{"VAR?":"x"},100,"%",0,">","/ev",[{"->":".^.b","c":true},{"b":["^and ","ev",{"VAR?":"x"},100,"%",{"f()":"print_int"},"out","/ev",{"->":".^.^.^.17"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"x"},0,"==","/ev",{"->":".^.b","c":true},{"b":["\n","^zero","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"x"},20,">=","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"x"},10,"/","/ev",["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^twenty","\n",{"->":".^.^.^.15"},null]}],["du","ev",3,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^thirty","\n",{"->":".^.^.^.15"},null]}],["du","ev",4,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^forty","\n",{"->":".^.^.^.15"},null]}],["du","ev",5,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^fifty","\n",{"->":".^.^.^.15"},null]}],["du","ev",6,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^sixty","\n",{"->":".^.^.^.15"},null]}],["du","ev",7,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^seventy","\n",{"->":".^.^.^.15"},null]}],["du","ev",8,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^eighty","\n",{"->":".^.^.^.15"},null]}],["du","ev",9,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^ninety","\n",{"->":".^.^.^.15"},null]}],"pop","nop","\n","ev",{"VAR?":"x"},10,"%",0,">","/ev",[{"->":".^.b","c":true},{"b":["<>","^-","<>",{"->":".^.^.^.25"},null]}],"nop","\n",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"x"},10,"<",{"VAR?":"x"},20,">","||","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"x"},10,"%","/ev",["du","ev",1,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^one","\n",{"->":".^.^.^.16"},null]}],["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^two","\n",{"->":".^.^.^.16"},null]}],["du","ev",3,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^three","\n",{"->":".^.^.^.16"},null]}],["du","ev",4,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^four","\n",{"->":".^.^.^.16"},null]}],["du","ev",5,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^five","\n",{"->":".^.^.^.16"},null]}],["du","ev",6,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^six","\n",{"->":".^.^.^.16"},null]}],["du","ev",7,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^seven","\n",{"->":".^.^.^.16"},null]}],["du","ev",8,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^eight","\n",{"->":".^.^.^.16"},null]}],["du","ev",9,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^nine","\n",{"->":".^.^.^.16"},null]}],"pop","nop","\n",{"->":".^.^.^.20"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"x"},"/ev",["du","ev",10,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^ten","\n",{"->":".^.^.^.15"},null]}],["du","ev",11,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^eleven","\n",{"->":".^.^.^.15"},null]}],["du","ev",12,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^twelve","\n",{"->":".^.^.^.15"},null]}],["du","ev",13,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^thirteen","\n",{"->":".^.^.^.15"},null]}],["du","ev",14,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^fourteen","\n",{"->":".^.^.^.15"},null]}],["du","ev",15,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^fifteen","\n",{"->":".^.^.^.15"},null]}],["du","ev",16,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^sixteen","\n",{"->":".^.^.^.15"},null]}],["du","ev",17,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^seventeen","\n",{"->":".^.^.^.15"},null]}],["du","ev",18,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^eighteen","\n",{"->":".^.^.^.15"},null]}],["du","ev",19,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^nineteen","\n",{"->":".^.^.^.15"},null]}],"pop","nop","\n",{"->":".^.^.^.20"},null]}],"nop","\n",{"->":".^.^.^.5"},null]}],"nop","\n",null],"print_num":[{"temp=":"x"},"ev",{"VAR?":"x"},0,"<","/ev",{"temp=":"is_neg"},"ev",{"VAR?":"x"},{"f()":"abs"},"/ev",{"temp=":"magnitude"},"\n","ev",{"VAR?":"magnitude"},"INT","/ev",{"temp=":"integral_part"},"\n","ev",{"VAR?":"magnitude"},{"VAR?":"integral_part"},"-","/ev",{"temp=":"fractional_part"},"ev",{"VAR?":"magnitude"},0.5,"-",{"f()":"abs"},0.1,"<","/ev",{"temp=":"is_half"},"\n","ev",{"VAR?":"fractional_part"},0.5,"-",{"f()":"abs"},0.1,"<","/ev",{"temp=":"and_half"},"\n","ev",{"VAR?":"is_neg"},"/ev",[{"->":".^.b","c":true},{"b":["^minus ",{"->":".^.^.^.49"},null]}],"nop","<>","\n",["ev",{"VAR?":"is_half"},"/ev",{"->":".^.b","c":true},{"b":["\n","^half a","\n",{"->":".^.^.^.54"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"integral_part"},{"f()":"print_int"},"out","/ev","ev",{"VAR?":"and_half"},"/ev",[{"->":".^.b","c":true},{"b":["^ and a half",{"->":".^.^.^.10"},null]}],"nop","\n",{"->":".^.^.^.54"},null]}],"nop","\n",null],"is_num_singular":[{"temp=":"x"},"ev",{"VAR?":"x"},"INT","/ev",{"temp=":"integral_part"},"\n","ev",{"VAR?":"x"},{"VAR?":"integral_part"},"-","/ev",{"temp=":"fractional_part"},"ev",{"VAR?":"fractional_part"},0.5,"-",{"f()":"abs"},0.1,"<","/ev",{"temp=":"is_half"},"\n","ev",{"VAR?":"x"},1,"==","/ev",{"temp=":"is_one"},"ev",{"VAR?":"is_half"},{"VAR?":"is_one"},"||","/ev","~ret",null],"print_num_unit":[{"temp=":"plural"},{"temp=":"singular"},{"temp=":"x"},"ev",{"VAR?":"x"},{"f()":"print_num"},"out","/ev","^ ","ev",{"VAR?":"x"},{"f()":"is_num_singular"},"/ev",[{"->":".^.b","c":true},{"b":["ev",{"VAR?":"singular"},"out","/ev",{"->":".^.^.^.15"},null]}],[{"->":".^.b"},{"b":["ev",{"VAR?":"plural"},"out","/ev",{"->":".^.^.^.15"},null]}],"nop","\n",null],"abs":[{"temp=":"x"},"ev",{"VAR?":"x"},"/ev",{"temp=":"result"},["ev",{"VAR?":"x"},0,"<","/ev",{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"x"},"_","/ev",{"temp=":"result","re":true},{"->":"abs.7"},null]}],[{"->":".^.b"},{"b":["\n","ev",{"VAR?":"x"},"/ev",{"temp=":"result","re":true},{"->":"abs.7"},null]}],"nop","\n","ev",{"VAR?":"result"},"/ev","~ret",null],"ink_arrays_demo":[{"temp=":"next"},"ev",{"x()":"Array_invalid"},"/ev",{"temp=":"arr_invalid"},"\n","ev",{"VAR?":"arr_invalid"},{"x()":"Array_isInvalid","exArgs":1},"/ev",{"temp=":"is_arr_invalid"},"\n","^arr_invalid: ","ev",{"VAR?":"arr_invalid"},"out","/ev","\n","^is_arr_invalid(","ev",{"VAR?":"arr_invalid"},"out","/ev","^): ","ev",{"VAR?":"is_arr_invalid"},"out","/ev","\n","ev",{"x()":"Array_new"},"/ev",{"temp=":"arr_foo"},"\n","ev",{"VAR?":"arr_foo"},1,{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},2,{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},3,{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},4,{"x()":"Array_pushBack","exArgs":2},"/ev",{"temp=":"idx_4"},"\n","ev",{"VAR?":"arr_foo"},"str","^one","/str",{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},"str","^two","/str",{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},"str","^three","/str",{"x()":"Array_pushBack","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},{"VAR?":"idx_4"},{"x()":"Array_remove","exArgs":2},"pop","/ev","\n","ev",{"VAR?":"arr_foo"},"str","^one","/str",{"x()":"Array_find","exArgs":2},"/ev",{"temp=":"idx_one"},"\n","^idx_one: ","ev",{"VAR?":"idx_one"},"out","/ev","\n","ev",{"VAR?":"next"},{"VAR?":"arr_foo"},0,"/ev",{"->":".^.loop"},{"loop":[{"temp=":"idx"},{"temp=":"arr_foo"},{"temp=":"next"},"ev",{"VAR?":"idx"},{"VAR?":"arr_foo"},{"x()":"Array_size","exArgs":1},"<","/ev",[{"->":".^.b","c":true},{"b":["\n","^arr_foo[","ev",{"VAR?":"idx"},"out","/ev","^] : ","ev",{"VAR?":"arr_foo"},{"VAR?":"idx"},{"x()":"Array_get","exArgs":2},"out","/ev","\n","ev",{"VAR?":"next"},{"VAR?":"arr_foo"},{"VAR?":"idx"},1,"+","/ev",{"->":".^.^.^"},{"->":".^.^.^.10"},null]}],"nop","\n",{"->":"next","var":true},null]}],"ink_dictionaries_demo":[{"temp=":"next"},"ev",{"x()":"Dictionary_invalid"},"/ev",{"temp=":"dct_invalid"},"\n","ev",{"VAR?":"dct_invalid"},{"x()":"Dictionary_isInvalid","exArgs":1},"/ev",{"temp=":"is_dct_invalid"},"\n","^dct_invalid: ","ev",{"VAR?":"dct_invalid"},"out","/ev","\n","^is_dct_invalid(","ev",{"VAR?":"dct_invalid"},"out","/ev","^): ","ev",{"VAR?":"is_dct_invalid"},"out","/ev","\n","ev",{"x()":"Dictionary_new"},"/ev",{"temp=":"dct_int_to_str"},"\n","ev",{"VAR?":"dct_int_to_str"},1,"str","^one","/str",{"x()":"Dictionary_set","exArgs":3},"pop","/ev","\n","ev",{"VAR?":"dct_int_to_str"},2,"str","^two","/str",{"x()":"Dictionary_set","exArgs":3},"pop","/ev","\n","ev",{"VAR?":"dct_int_to_str"},3,"str","^three","/str",{"x()":"Dictionary_set","exArgs":3},"pop","/ev","\n","ev",{"VAR?":"dct_int_to_str"},{"x()":"Dictionary_inverse","exArgs":1},"/ev",{"temp=":"dct_str_to_int"},"\n","ev",{"VAR?":"next"},{"VAR?":"dct_int_to_str"},{"VAR?":"dct_str_to_int"},0,"/ev",{"->":".^.loop"},{"loop":[{"temp=":"idx"},{"temp=":"dct_s2i"},{"temp=":"dct_i2s"},{"temp=":"next"},"ev",{"VAR?":"idx"},{"VAR?":"dct_i2s"},{"x()":"Dictionary_size","exArgs":1},"<","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"dct_i2s"},{"VAR?":"idx"},{"x()":"Dictionary_getKey","exArgs":2},"/ev",{"temp=":"key_i2s"},"\n","^dct_i2s[","ev",{"VAR?":"key_i2s"},"out","/ev","^] : ","ev",{"VAR?":"dct_i2s"},{"VAR?":"key_i2s"},{"x()":"Dictionary_get","exArgs":2},"out","/ev","\n","ev",{"VAR?":"dct_s2i"},{"VAR?":"idx"},{"x()":"Dictionary_getKey","exArgs":2},"/ev",{"temp=":"key_s2i"},"\n","^dct_s2i[","ev",{"VAR?":"key_s2i"},"out","/ev","^] : ","ev",{"VAR?":"dct_s2i"},{"VAR?":"key_s2i"},{"x()":"Dictionary_get","exArgs":2},"out","/ev","\n","ev",{"VAR?":"next"},{"VAR?":"dct_i2s"},{"VAR?":"dct_s2i"},{"VAR?":"idx"},1,"+","/ev",{"->":".^.^.^"},{"->":".^.^.^.11"},null]}],"nop","\n",{"->":"next","var":true},null]}],"global decl":["ev",-1,{"VAR=":"arr_current_observations"},"/ev","end",null]}],"listDefs":{}}